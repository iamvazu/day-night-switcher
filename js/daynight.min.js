(function(){'use strict';if(!('querySelector'in document&&'addEventListener'in window&&Array.prototype.forEach)){console.log('Feature not supported by your browser');return false;}
var switchers=document.querySelectorAll('[data-daynight-moment]');var currentChoice=localStorage.getItem('daynight');function getOppositeAction(action){return action=='enable'?'disable':'enable';}
function getOppositeMoment(moment){return moment=='day'?'night':'day';}
function getRelAttribute(action){var rels={'disable':'alternate stylesheet','enable':'stylesheet'};return rels[action];}
function daynight(action,moment){var links=document.querySelectorAll(`[data-daynight-css="${moment}"]`);var oLinks=document.querySelectorAll(`[data-daynight-css="${getOppositeMoment(moment)}"]`);[].forEach.call(links,function(l){l.removeAttribute('rel');l.setAttribute('rel',getRelAttribute(action));});[].forEach.call(oLinks,function(l){l.removeAttribute('rel');l.setAttribute('rel',getRelAttribute(getOppositeAction(action)));});}
function switchDataStatus(s){if(s.dataset.daynightMoment==='day'){s.dataset.daynightMoment='night';}else if(s.dataset.daynightMoment==='night'){s.dataset.daynightMoment='day';}}
function avoidFlash(currentChoice){var baseColors=document.querySelector('[data-daynight-base-colors]');if(!baseColors){return false;}
baseColors=baseColors.dataset.daynightBaseColors.split(/;/);if(baseColors.length!==2){return false;}
var body=document.querySelector('body');if(currentChoice==='day'){body.style.backgroundColor=baseColors[0];}else{body.style.backgroundColor=baseColors[1];}}
if(currentChoice){daynight('enable',currentChoice);avoidFlash(currentChoice);[].forEach.call(switchers,function(s){s.dataset.daynightMoment=currentChoice;});}
[].forEach.call(switchers,function(s){s.addEventListener("click",function(e){e.preventDefault();if(s.dataset.daynightMoment==='day'){localStorage.setItem('daynight','night');avoidFlash('night');daynight('disable','day');}else if(s.dataset.daynightMoment==='night'){localStorage.setItem('daynight','day');avoidFlash('day');daynight('enable','day');}
switchDataStatus(s);},false);});})();